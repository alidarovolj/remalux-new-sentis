# Руководство по настройке режима веб-камеры для AR

## Обзор

Данное руководство описывает, как настроить приложение Remalux для работы с веб-камерой на компьютере для тестирования и отладки функций сегментации стен без необходимости использования AR-устройства.

## Компоненты системы

Система веб-камеры для AR включает следующие компоненты:

1. **WebcamDisplay** - компонент для отображения видео с веб-камеры на экране.
2. **WebcamSegmentationSync** - компонент для синхронизации веб-камеры с системой сегментации стен.
3. **Настройки WallSegmentation** - активируются с параметром `forceWebcamUsage = true`.

## Быстрая настройка

### Метод 1: Использование готовых инструментов редактора Unity

1. В иерархии сцены нажмите правой кнопкой мыши и выберите **GameObject > UI > AR Tools > Webcam Display Panel**.
2. Затем аналогично создайте элемент для отображения результатов сегментации: **GameObject > UI > AR Tools > Segmentation Result Display**.
3. Убедитесь, что на компоненте WallSegmentation включена опция **Force Webcam Usage**.

### Метод 2: Ручная настройка

1. Создайте Canvas в сцене, если его еще нет.
2. Создайте GameObject для панели отображения веб-камеры.
3. Добавьте компонент WebcamDisplay.
4. Добавьте GameObject для отображения результатов сегментации.
5. Добавьте компонент WebcamSegmentationSync и настройте ссылки на другие компоненты.

## Настройка WallSegmentation

В компоненте WallSegmentation доступны следующие параметры для работы с веб-камерой:

- **Force Webcam Usage** - включает принудительное использование веб-камеры вместо AR.
- **Webcam Device Name** - название веб-камеры для использования. Оставьте пустым для использования камеры по умолчанию.

## Отображение результатов сегментации

Для отладки вы можете наблюдать результаты сегментации в реальном времени в интерфейсе:

1. В правом верхнем углу экрана отображается текущая маска сегментации.
2. Цвета представляют разные типы поверхностей:
   - Красный - стены
   - Зеленый - потолок
   - Синий - пол
   - Черный - другие объекты

## Устранение неполадок

### Камера не отображается

1. Убедитесь, что веб-камера подключена и работает.
2. Проверьте, включена ли опция **Force Webcam Usage** в WallSegmentation.
3. Попробуйте указать конкретное имя веб-камеры в поле **Webcam Device Name**.

### Сегментация не работает

1. Проверьте, успешно ли загрузилась модель Sentis.
2. Проверьте консоль Unity на наличие ошибок.
3. Убедитесь, что изображение с веб-камеры корректно отображается в UI.

### Низкая производительность

1. Уменьшите разрешение веб-камеры в компоненте WebcamDisplay.
2. Проверьте настройки модели в WallSegmentation.

## Дополнительные настройки

Для улучшения опыта работы можно добавить элементы управления:

- Кнопки для выбора разных веб-камер.
- Слайдер для настройки размера окна с сегментацией.
- Переключатель для отображения или скрытия отладочной информации.

## Заключение

Режим веб-камеры позволяет быстро тестировать функциональность сегментации без необходимости развертывания на мобильном AR-устройстве, что значительно ускоряет процесс отладки и разработки. 